@using CMSGTechnical.Domain.Models
@using CMSGTechnical.Mediator.Dtos
@using System.Globalization

<div class="menu-item">
    <div class="menu-item__details">
        <div class="menu-item__title">
            <strong>@Item.Name</strong>
            <span class="menu-item__price">@Item.Price.ToString("C", CultureInfo.GetCultureInfo("en-GB"))</span>
        </div>
        <div class="menu-item__category">
            @{
                var categorySlug = Item.Category.ToString().ToLowerInvariant();
            }
            <span class="menu-item__category-icon menu-item__category-icon--@categorySlug" aria-hidden="true"></span>
            <span class="menu-item__category-name">@Item.Category</span>
        </div>

        @if (!string.IsNullOrWhiteSpace(Item.Description))
        {
            <div class="menu-item__description">
                @Item.Description
            </div>
        }
    </div>
    <div class="menu-item__actions">
        @if (OnAdd.HasDelegate)
        {
            <button class="btn btn-primary btn-round" @onclick="Add" aria-label="Add item to basket" title="Add to basket">+</button>
        }
        @if (OnRemove.HasDelegate)
        {
            <button class="btn btn-primary btn-round" @onclick="Remove">-</button>
        }
    </div>
</div>


@code {

    [Parameter] public MenuItemDto Item { get; set; } = new();
    

    [Parameter]
    public EventCallback<MenuItemDto> OnAdd { get; set; }

    [Parameter]
    public EventCallback<MenuItemDto> OnRemove { get; set; }


    private async Task Remove() => await OnRemove.InvokeAsync(Item);
    private async Task Add() => await OnAdd.InvokeAsync(Item);




}


